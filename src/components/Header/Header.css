/* ====== Pill header with centered, bulging logo badge ====== */

.site-header {
  position: sticky;
  top: 12px;                   /* float a bit from the very top */
  z-index: 50;
  padding: 0 12px;
  transition: transform .42s cubic-bezier(.22,.61,.36,1), opacity .25s ease;
  will-change: transform;
  overflow: visible;           /* allow the badge to bulge above/below */
}

.site-header.is-hidden   { transform: translateY(-140%); opacity: .98; }
.site-header.is-revealing{ animation: dropIn .52s cubic-bezier(.2,.9,.2,1) both; }

@keyframes dropIn {
  0% { transform: translateY(-120%); }
  70%{ transform: translateY(6%); }
  100%{ transform: translateY(0); }
}

.header-shell {
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;
  gap: 1rem;

  background: color-mix(in srgb, var(--bg) 92%, transparent);
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 10px 14px;          /* header HEIGHT is defined by this + the dock below */
  box-shadow: 0 12px 30px rgba(0,0,0,.06);
  backdrop-filter: blur(8px) saturate(140%);
  overflow: visible;
}

.site-header.is-stuck .header-shell {
  padding: 8px 12px;
  box-shadow: 0 16px 40px rgba(0,0,0,.10);
}

/* ---------- brand & bulging logo ---------- */
/* Dock defines the header’s intrinsic height (kept constant) */
.brand { position: relative; display: inline-block; width: 56px; height: 56px; }
.brand-dock { display: block; width: 56px; height: 56px; }

/* Badge is centered vertically, protruding above and below the pill */
.logo-badge {
  position: absolute;
  top: 50%; left: 0;
  transform: translate(-28%, -50%);  /* negative X pulls it out to the left */
  width: 92px; height: 92px;          /* bigger than the dock → bulges above & below */
  display: grid; place-items: center;
  background: #fff;                   /* white in both themes */
  border-radius: 999px;
  border: 2px solid rgba(0,0,0,.06);
  box-shadow: 0 10px 26px rgba(0,0,0,.15);
  overflow: hidden;
  pointer-events: none;               /* keeps entire brand link clickable */
}
.logo-badge img {
  width: 86%; height: 86%;
  object-fit: contain;
  backface-visibility: hidden;
  transform: translateZ(0);           /* avoids subpixel blur during transforms */
}
.logo-badge.sm { width: 44px; height: 44px; transform: translate(0, -50%); }
.logo-badge.static { position: static; transform: none; box-shadow: none; border: 1px solid var(--border); }

/* ---------- center nav ---------- */
.nav { display: flex; justify-content: center; gap: .8rem; }
.nav a {
  position: relative;
  padding: .6rem .9rem;
  border-radius: 12px;
  color: var(--text);
  opacity: .95;
  font-weight: 700;
  transition: background .18s, opacity .18s, color .18s, transform .18s, border-color .18s;
  border: 1px solid transparent;
}
.nav a::after {
  content:""; position:absolute; left:12px; right:12px; bottom:8px; height:2px;
  border-radius:999px; background:transparent; transform:scaleX(0); transform-origin:left;
  transition: background .2s, transform .2s;
}
.nav a:hover {
  background: color-mix(in srgb, var(--surface) 80%, var(--brand-300) 20%);
  border-color: color-mix(in srgb, var(--brand-700) 24%, var(--border) 76%);
  transform: translateY(-1px);
  opacity: 1;
}
.nav a:hover::after { background: var(--brand-700); transform: scaleX(1); }
.nav a.active {
  color: var(--brand-700);
  opacity: 1;
  background: var(--surface);
  border-color: color-mix(in srgb, var(--brand-700) 28%, var(--border) 72%);
}
.nav a.active::after { background: var(--brand-700); transform: scaleX(1); }

/* ---------- right controls ---------- */
.right { display: flex; align-items: center; justify-content: flex-end; gap: .5rem; }

.icon-btn {
  width: 42px; height: 42px;
  display: grid; place-items: center;
  border-radius: 999px;
  background: var(--surface);
  border: 1.5px solid var(--border);
  color: var(--text);
}

.cta {
  display: inline-flex; align-items: center; gap: .55rem;
  padding: .7rem 1.1rem;
  border-radius: 999px;
  background: var(--brand-700);
  color: #fff;
  font-weight: 800;
  letter-spacing: .2px;
  border: 1px solid color-mix(in srgb, var(--brand-700) 85%, #000 0%);
  white-space: nowrap;
}
.cta .arrow { opacity: .85; }
.cta:hover { filter: brightness(1.02); transform: translateY(-1px); }

/* hamburger visibility */
.hamburger { display: none; }

@media (max-width: 992px) {
  .header-shell { grid-template-columns: 1fr auto auto; }
  .nav { display: none; }
  .hamburger { display: grid; }
}

/* ====== Drawer ====== */
.drawer {
  position: fixed; inset: 0 auto 0 0; width: min(86vw, 380px);
  background: var(--bg); border-right: 1px solid var(--border);
  transform: translateX(-100%); transition: transform .32s ease;
  z-index: 70; display: grid; grid-template-rows: auto auto 1fr auto; gap: 1rem; padding: 16px 16px 24px;
}
.drawer.open { transform: translateX(0); }

.drawer-header { display: flex; align-items: center; justify-content: space-between; padding-bottom: 8px; border-bottom: 1px solid var(--border); }
.drawer-header .brand { width: auto; height: auto; display: inline-flex; align-items: center; gap: .6rem; }
.drawer-header .brand-dock.sm { width: 36px; height: 36px; }

.drawer-search { display: grid; grid-template-columns: 1fr auto; gap: 8px; margin-top: 12px; }
.drawer-search input { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; padding: .75rem .9rem; color: var(--text); }
.drawer-search .search-btn { display: grid; place-items: center; padding: 0 .9rem; border-radius: 12px; border: 1px solid var(--border); background: var(--surface); }

.drawer-nav { list-style: none; padding: 0; margin: 8px 0 0; }
.drawer-nav li a { display: block; padding: 14px 4px; border-bottom: 1px solid var(--border); color: var(--text); }
.drawer-nav li a.active { color: var(--brand-700); font-weight: 700; }

.drawer-cta {
  margin-top: 8px; display: inline-flex; align-items: center; gap: .6rem;
  padding: .85rem 1rem; border-radius: 12px; background: var(--brand-700); color: #fff; font-weight: 700; justify-self: start;
}

/* Backdrop */
.backdrop {
  position: fixed; inset: 0; background: rgba(0,0,0,.4); backdrop-filter: blur(2px);
  opacity: 0; pointer-events: none; transition: opacity .25s ease; z-index: 60;
}
.backdrop.open { opacity: 1; pointer-events: auto; }
